<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>NGL Spammer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
  </head>

  <body class="blue-grey darken-4">
    <div class="container">
      <div class="row">
        <div class="col s12 m8 offset-m2 l6 offset-l3">
          <div class="card z-depth-5">
            <div class="card-content">
              <span class="card-title center-align">NGL Spammer</span>

              <div class="center-align" style="margin-bottom: 30px;">
                <span id="typed-output" style="font-weight: bold; color: #64b5f6; font-size: 1.2rem;"></span>
              </div>

              <form id="spamForm">
                <div class="input-field">
                  <i class="material-icons prefix">account_circle</i>
                  <input id="username" name="username" type="text" required />
                  <label for="username">NGL Username</label>
                </div>
                <div class="input-field">
                  <i class="material-icons prefix">message</i>
                  <input id="message" name="message" type="text" required />
                  <label for="message">Message</label>
                </div>
                <div class="input-field">
                  <i class="material-icons prefix">repeat</i>
                  <input id="amount" name="amount" type="number" min="1" required />
                  <label for="amount">Amount</label>
                </div>
                <div class="center-align">
                  <button class="btn waves-effect waves-light" type="submit">
                    Spam
                    <i class="material-icons right">send</i>
                  </button>
                </div>
              </form>

              <div id="result" class="center-align" style="margin-top: 20px;"></div>
            </div>
            <div class="card-action center-align" style="font-size: 0.9rem;">
              Made with <span style="color: red;">â™¥</span> by 
              <a href="https://www.facebook.com/Churchill.Dev4100" target="_blank">Churchill</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        M.AutoInit();
      });

      document.getElementById('spamForm').addEventListener('submit', async function (e) {
        e.preventDefault();
        const form = e.target;
        const data = {
          username: form.username.value,
          message: form.message.value,
          amount: form.amount.value,
        };
        const res = await fetch('/api/nglspam', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data),
        });
        const result = await res.json();
        const resultDiv = document.getElementById('result');
        if (result.message) {
          resultDiv.innerHTML = `<span class="green-text">${result.message}</span>`;
        } else {
          resultDiv.innerHTML = `<span class="red-text">${result.error}</span>`;
        }
      });

      new Typed('#typed-output', {
        strings: [
          'Welcome to NGL Spammer!',
          'Yokuzo... watashi wa Soul Society da.',
          'Ore ga... Gundam da.',
          'Ore wa ten ni tatsu!',
          'Kono umi de ichiban jiyuu na otoko da!',
          'Ore wa ningen wo yameru zo, JoJo!',
          'Sentouryoku... tatta no go ka. Gomi me.'
        ],
        typeSpeed: 50,
        backSpeed: 25,
        backDelay: 1800,
        loop: true
      });
    </script>
  </body>
</html>
